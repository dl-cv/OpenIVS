需要做的事情：
汇总文档覆盖范围并判断可行性。
给出能否开发的结论。
列出仍需补充的信息。
结论：可以依据这些文档开发出功能与流程一致的新版本，包括多相机采集、推理链路、模版匹配、OK/NG 汇总、PLC 写回、落盘与UI等。但要做到可落地、可复现的工程级实现，还需要补充一批实施细节，否则只能在关键点上做假设。
仍需补充的信息清单：

设备与通信：相机/读码器/PLC 型号与 SDK 版本、协议与寄存器地址表（含拍照触发、结果写回、运动控制与当前位置）、触发与回写时序、超时/重试策略、测试设备与模拟规范。[AI已完成]

模型与推理：模型格式/输入输出/阈值/热更新策略。[AI已完成]

模版与匹配数据：见 功能.md 5.6.1~5.7.1（模版文件结构、OCR/检测字段、坐标系、Unknown 落盘规则、生成/更新约束）。[AI已完成]

结果与存储：见 功能.md 5.11.1~5.11.5 与 5.7（JSON/CSV schema 与样例、时间基准与命名细则、可视化规则、日志与轮转）。[AI已完成]

底层库与项目架构：基于原 OpenIVS 底层库，缺失能力从 PrintMatch 移植。详见 `底层库与移植.md`。[AI已完成]

UI/交互与流程编辑：
- 第一版不做流程图编辑器和图驱动执行引擎，主流程用 WorkflowManager 代码编排，推理子图通过 DlcvFlowRunner 驱动 JSON 执行。
- 画面分割初始版本支持 2x2 布局，后续扩展 3x3/4x4；区域绑定相机位置后显示对应图像与可视化叠加。
- 模版管理界面：选位置生成模版、从推理结果加载、列表查看/删除/启用禁用、OCR 信息展示。
- 调试界面：设备初始化状态、单独拍照、手动加载图片推理、JSON 详情查看/复制、Modbus 通信日志。
- 待补充：界面原型与状态流转、错误提示与恢复路径、权限与多语言要求。

运行与部署/验收：
- 目标系统：Windows 10+ / .NET Framework 4.7.2 / WPF。
- 依赖：OpenCvSharp4、Newtonsoft.Json、海康 MVS SDK、EasyModbus、DLCV SDK。
- 性能基线：参考 PrintMatch 现有节拍（含多路相机采集+推理+匹配+存图的整体耗时）。
- 待补充：性能指标（节拍/并发/资源）、验收用例与期望输出、发布/安装/升级流程。

已确认的决策：
- 流程图编辑器暂不实现，后续再加。
- 创建全新 OpenIVS 项目，引用原 OpenIVS 底层库，缺失能力从 PrintMatch 移植。
- 主流程运行引擎暂不做图驱动，第一版用代码编排工作流。
- 设置与流程图分工：连接参数/设备选择/全局路径放设置，推理链路编排/模型参数放流程 JSON。

补齐以上信息后，可以在不生成代码的前提下把整体设计完整定型，并确保实现结果可验收、可维护。

## 开发可行性评估

结论：可以开始开发。底层库与业务逻辑文档充分，UI 层需迭代但有 PrintMatch 参考。

### 可直接编码的模块（信心 85-95%）

| 模块 | 依据 | 信心 |
|------|------|------|
| 解决方案结构与项目划分 | 底层库与移植.md 完整项目树 | 100% |
| DataModels 全部数据模型 | 功能.md 5.6.1/5.7.1 + PrintMatch 源码 | 95% |
| TemplateEngine 匹配算法 | 功能.md 5.7 五状态匹配+分数公式+跨组误判 | 95% |
| TemplateManager 文件管理 | 功能.md 5.6.1/5.6.3 TemplateId/CRUD/Unknown | 95% |
| TemplateVisualizer 可视化 | 功能.md 5.7 RGB+虚线样式+绘制顺序 | 95% |
| ImageSaveService 图像保存 | 功能.md 5.11 路径/命名/格式/预警 | 95% |
| CsvDetectionLogService | 功能.md 5.11.3 schema+转义+空跑 | 95% |
| JSON 结果保存 | 功能.md 5.11.1/5.11.2 schema+样例 | 95% |
| InferenceEngine/DlcvFlowRunner | 流程图.md JSON/Overrides/ExecutionContext | 90% |
| ProductTypeService | 功能.md 5.4 API协议+降级+映射表 | 90% |
| 判定链路 | 流程图.md Decision ok_raw→ok_internal→ok_send | 90% |
| ICamera/TestCamera/CameraUtils | 底层库与移植.md + PrintMatch 源码 | 90% |
| CodeReader/ModbusCodeReader | 底层库与移植.md + PrintMatch 源码 | 90% |
| WorkflowManager 流水线调度 | 流程图.md 取图串行+推理并行+条码并行 | 85% |
| ModbusApi TCP/FINS 增强 | 功能.md 5.10 + PrintMatch 源码 | 85% |
| Logging 高级日志 | 功能.md 5.11 + PrintMatch 源码 | 85% |

### 需要做假设或迭代的模块（信心 65-75%）

| 模块 | 原因 | 应对 |
|------|------|------|
| UI 布局 | 无线框图，只有功能描述 | 参考 PrintMatch XAML，边做边调 |
| AppSettings 完整字段 | 文档按分类列出设置项但无完整字段清单 | 从 PrintMatch AppSettings 推导，改为动态位置 |
| 设置变更检测与局部重初始化 | 文档只说"需提示重新初始化" | 参考 PrintMatch ApplySettingsChanges 源码 |
| 拍照信号监听线程 | 文档说了轮询+上升沿，缺具体实现 | 参考 PrintMatch 监听线程 |
| 错误恢复路径 | 文档只说"可恢复至 Ready"，无状态机 | 做基础 try-catch + 状态重置 |

### 确实缺失的信息

| 缺失项 | 影响 | 建议 |
|--------|------|------|
| UI 线框图/原型 | 无法确定精确布局 | 先按 PrintMatch 布局做，后续调整 |
| 性能指标 | 不知道目标耗时 | 先不优化，功能完成后测量 |
| 验收用例 | 不知道怎么判定完成 | 以 PrintMatch 功能对齐为标准 |

### 推荐开发顺序

第一批（底层库移植，无 UI 依赖）：
1. DataModels —— 所有数据结构
2. CameraManager 增强 —— ICamera + TestCamera
3. ModbusApi 增强 —— TCP + 异步 + FINS
4. Logging —— 高级日志
5. CodeReader —— 读码器接口与实现
6. WPF ImageViewer —— 图像显示控件

第二批（业务引擎，纯逻辑）：
7. TemplateEngine —— 匹配算法 + 管理 + 可视化
8. InferenceEngine —— DlcvFlowRunner + Pipeline

第三批（应用层 + UI）：
9. AppSettings + 设置持久化
10. WorkflowManager —— 主流程编排
11. ImageSaveService + CsvDetectionLogService
12. 主界面 + 设置界面 + 模版管理界面 + 调试界面
